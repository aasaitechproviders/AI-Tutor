<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <title>Aasai SmartEDU - AI Learning Assistant</title>
    <meta name="description" content="AI-powered learning assistant for school students aged 8-17.">
    
    <!-- MathJax Configuration - MUST come before loading MathJax -->
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['\\(', '\\)']],
            displayMath: [['\\[', '\\]']],
            processEscapes: true,
            processEnvironments: true
        },
        options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        startup: {
            ready: () => {
                console.log('MathJax is loaded and configured');
                MathJax.startup.defaultReady();
                console.log('MathJax startup complete');
            }
        }
    };
    </script>
    
    <!-- Load MathJax -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script" async></script>
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer onload="console.log('Google GSI loaded')"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <span class="logo-icon">üìö</span>
                <span>Aasai SmartEDU</span>
            </div>
            <div class="auth-container">
                <div class="google-signin-container" id="google-signin-container" style="display: flex;">
                    <div id="google-signin-button"></div>
                </div>
                <div id="user-profile" class="user-profile">
                    <img id="user-avatar" class="user-avatar" src="" alt="User Avatar">
                    <div class="user-info">
                        <div id="user-name" class="user-name"></div>
                        <div id="user-email" class="user-email"></div>
                        <div id="user-stats" class="user-stats">
                            <span><span id="search-count">0</span>S</span> | 
                            <span><span id="conversation-count">0</span>C</span>
                        </div>
                    </div>
                    <button id="sign-out-btn" class="sign-out-btn">Sign Out</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div id="auth-required" class="auth-required">
            <h2>Welcome to Aasai SmartEDU</h2>
            <p>Please sign in with your Google account to start learning</p>
        </div>

        <div id="main-layout" class="main-layout" style="display: none;">
            <!-- Mode Toggle Section -->
            <div class="mode-toggle-section">
                <div class="mode-toggle-header">
                    <h2 class="mode-toggle-title">Choose Your Study Mode</h2>
                    <p class="mode-toggle-subtitle">Select how you want to explore your syllabus content</p>
                </div>
                
                <div class="mode-buttons">
                    <div class="mode-btn active" id="ai-search-mode" onclick="switchMode('search')">
                        <div class="mode-icon">ü§ñ</div>
                        <div class="mode-title">AI Search</div>
                        <div class="mode-description">Ask questions and get instant answers from your syllabus</div>
                    </div>
                    
                    <div class="mode-btn" id="question-bank-mode" onclick="switchMode('questions')">
                        <div class="mode-icon">üìù</div>
                        <div class="mode-title">Question Bank</div>
                        <div class="mode-description">Browse organized questions by units and topics</div>
                    </div>
                </div>
                
                <!-- Course Selection Panel -->
                <div id="course-selection-panel" class="course-selection-panel">
                    <h3 class="course-selection-title">Select Your Course Details</h3>
                    <div class="selectors-grid">
                        <div class="selector-group">
                            <label for="department-select">Department</label>
                            <select id="department-select" class="form-select">
                                <option value="">Select Department</option>
                                <option value="computer-science">Computer Science</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="chemistry">Chemistry</option>
                            </select>
                        </div>
                        
                        <div class="selector-group">
                            <label for="semester-select">Semester</label>
                            <select id="semester-select" class="form-select">
                                <option value="">Select Semester</option>
                                <option value="1">Semester 1</option>
                                <option value="2">Semester 2</option>
                                <option value="3">Semester 3</option>
                            </select>
                        </div>
                        
                        <div class="selector-group">
                            <label for="subject-select">Subject</label>
                            <select id="subject-select" class="form-select">
                                <option value="">Select Subject</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Section -->
            <div id="search-section" class="search-container show">
                <div class="search-header">
                    <h2 class="search-title">Ask AI About Your Syllabus</h2>
                    <p class="search-subtitle">Get instant answers with proper formatting</p>
                </div>
                
                <!-- Language Selector -->
                <div class="language-selector">
                    <label for="language-select">üåê Language:</label>
                    <select id="language-select" class="language-select">
                        <option value="en-US">English</option>
                        <option value="hi-IN">Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</option>
                        <option value="ta-IN">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</option>
                        <option value="te-IN">Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)</option>
                        <option value="kn-IN">Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)</option>
                        <option value="ml-IN">Malayalam (‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç)</option>
                        <option value="mr-IN">Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)</option>
                        <option value="gu-IN">Gujarati (‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä)</option>
                        <option value="bn-IN">Bengali (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)</option>
                        <option value="pa-IN">Punjabi (‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä)</option>
                        <option value="es-ES">Spanish (Espa√±ol)</option>
                        <option value="fr-FR">French (Fran√ßais)</option>
                        <option value="de-DE">German (Deutsch)</option>
                        <option value="ja-JP">Japanese (Êó•Êú¨Ë™û)</option>
                        <option value="zh-CN">Chinese (‰∏≠Êñá)</option>
                        <option value="ar-SA">Arabic (ÿßŸÑÿπÿ±ÿ®Ÿäÿ©)</option>
                    </select>
                </div>

                <!-- Voice Status -->
                <div id="voice-status" class="voice-status">
                    <span id="voice-status-text"></span>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" id="question-input" placeholder="What would you like to know?">
                    <button class="voice-btn" id="voice-btn" title="Voice Input">üé§</button>
                    <button class="search-btn" id="search-button">Search</button>
                </div>

                <!-- Results Section -->
                <div id="results-container" class="results-container">
                    <div class="results-header">
                        <h2 class="results-title">Results</h2>
                        <span id="results-count"></span>
                    </div>
                    <div id="results-content">
                        <div class="no-results">
                            <p>Your search results will appear here</p>
                        </div>
                    </div>
                </div>

                <!-- Chat History -->
                <div class="chat-history-search">
                    <div class="chat-history-header">
                        <h3 class="chat-history-title">Recent Searches</h3>
                        <button id="refresh-history-btn" class="refresh-btn" title="Refresh">üîÑ</button>
                    </div>
                    
                    <div id="chat-history-grid" class="chat-messages-grid">
                        <div class="no-chat-history">
                            <p>No search history yet</p>
                        </div>
                    </div>
                    <button id="load-more-history-btn" class="load-more-btn" style="display: none;">Load More</button>
                </div>
            </div>

            <!-- Question Bank Section -->
            <div id="units-container" class="units-container">
                <div class="units-header">
                    <h2 class="units-title">Unit-wise Question Bank</h2>
                </div>
                
                <div class="course-info">
                    <h4 id="selected-course">Select Course Details</h4>
                    <p>Choose department, semester, and subject</p>
                </div>
                
                <div id="units-grid" class="units-grid"></div>
            </div>
        </div>
    </main>

    <div id="notification" class="notification"></div>

    <footer>
        <div class="container footer-content">
            <p>&copy; 2025 Aasai SmartEDU - AI Syllabus Assistant</p>
            <div class="footer-links">
                <a href="https://www.aasaitech.in">Company Website</a>
                <a href="#">Privacy</a>
                <a href="#">Terms</a>
                <a href="#">Help</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>
